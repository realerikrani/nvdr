<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forecasting the Mean Monthly CVSS Scores • nvdr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">nvdr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book fa-lg"></span>
     
    Documentation
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-rocket fa-lg"></span>
     
    User Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/forecasting.html">Forecasting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/performance.html">
    <span class="fa fa-tachometer fa-lg"></span>
     
    Performance
  </a>
</li>
<li>
  <a href="https://github.com/realerikrani/nvdr/">
    <span class="fa fa-github fa-lg"></span>
     
    Source Code
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Forecasting the Mean Monthly CVSS Scores</h1>
            
          </div>

    
    
<div class="contents">
<p>In this guide, the existing data that are included with the package are put into use. This means working with vulnerability entries from CVE-2011 to CVE-2016 as of 7 October 2017. The data have been preprocessed by <code><a href="http://www.rdocumentation.org/packages/nvdr/topics/get_nvd_entries">nvdr::get_nvd_entries</a></code> and are accessible through <code><a href="http://www.rdocumentation.org/packages/nvdr/topics/nvd">nvdr::nvd</a></code>.</p>
<div id="prepare-the-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-the-time-series" class="anchor"></a>Prepare the Time Series</h2>
<p>A new CWE object <code>c</code> is created. Then the method <code>setBaseData()</code> without arguments sets the preprocessed data to be the value of the <code>CWE</code> object’s private attribute <code>base_data</code>. The method <code>setTimeSeriesData</code> takes a time series <code>ts</code> object and sets that to be the value of the <code>CWE</code> object’s private attribute <code>time_series_data</code>.</p>
<p>The time series data is prepared by the method <code>getInterestingMonthlyData</code> which selects a subset of CWEs based on three different criteria (see the documentation of class <code>CWE</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">c &lt;-<span class="st"> </span>CWE<span class="op">$</span><span class="kw">new</span>()
c<span class="op">$</span><span class="kw">setBaseData</span>()
c<span class="op">$</span><span class="kw">setTimeSeriesData</span>(c<span class="op">$</span><span class="kw">getInterestingMonthlyData</span>())</code></pre></div>
</div>
<div id="prepare-the-forecasting-object" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-the-forecasting-object" class="anchor"></a>Prepare the Forecasting Object</h2>
<p>A new CVSSForecaster object <code>cf</code> is created. The previously created CWE object <code>c</code> is used as an input that defines the CWE names, the time series and time period that <code>cf</code> can use.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf &lt;-<span class="st"> </span>CVSSForecaster<span class="op">$</span><span class="kw">new</span>()
cf<span class="op">$</span><span class="kw">setCWEs</span>(c)</code></pre></div>
</div>
<div id="generate-forecasts" class="section level2">
<h2 class="hasAnchor">
<a href="#generate-forecasts" class="anchor"></a>Generate Forecasts</h2>
<p>Make the <code>cf</code> object to generate forecasts of 13 different types of models as <code>setBenchmark</code> chooses the benchmark model after comparing the accuracy of 4 different benchmark models and <code>setTBATS</code> can give <code>BATS</code> or <code>TBATS</code> models as output. Executing all the following commands takes multiple minutes. Creating Bagged ETS, ARIMA and NNAR models is time-consuming (see <a href="performance.html">“Performance”</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">setBenchmark</span>()
cf<span class="op">$</span><span class="kw">setTSLinear</span>()
cf<span class="op">$</span><span class="kw">setETS</span>()
cf<span class="op">$</span><span class="kw">setStructTS</span>()
cf<span class="op">$</span><span class="kw">setBaggedETS</span>()
cf<span class="op">$</span><span class="kw">setARIMA</span>(<span class="dt">stepwise =</span> F, <span class="dt">approximation =</span> F)
cf<span class="op">$</span><span class="kw">setARFIMA</span>()
cf<span class="op">$</span><span class="kw">setNNAR</span>(<span class="dt">pi_simulation =</span> T)
cf<span class="op">$</span><span class="kw">setTBATS</span>()</code></pre></div>
<p>Once the process is finished, the results can be analysed. The results will not be the same after every run as some model creation (bagged ETS and neural network models) include randomness during the results creation process.</p>
</div>
<div id="initial-steps-with-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#initial-steps-with-the-results" class="anchor"></a>Initial Steps with the Results</h2>
<p>For each CWE, the best models which have the best overall forecast accuracy results (MAE, RMSE, MAPE, MASE) can be found. The error measures are calculated on the test set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getBestAssessments</span>()</code></pre></div>
<p>The best model objects can be saved in <code>cf</code> object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">setBestModelList</span>()</code></pre></div>
<p>Now, the best model objects can be retrieved as a list. This is useful later.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getBestModelList</span>()</code></pre></div>
<p>Also, all the created models can be retrieved as a list. For example to retrieve all selected benchmark models, the following command should be executed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getBenchmark</span>()</code></pre></div>
<p>The lists of specific types of models also provide an opportunity to access specific CWE. For example, if it is known that CWE-119 is in the list, then its object can be retrieved.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getBenchmark</span>(<span class="st">"CWE-119"</span>)</code></pre></div>
<div id="storing-the-results-for-later-use" class="section level3">
<h3 class="hasAnchor">
<a href="#storing-the-results-for-later-use" class="anchor"></a>Storing the Results for Later Use</h3>
<p>At this point in time, it is useful to save <code>CWE</code> object <code>c</code> and <code>CVSSForecaster</code> object <code>cf</code> to an <code>.rda</code> file in order to use them later. The command</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()</code></pre></div>
<p>will show the working directory, where the resulting file will be saved. The following command saves the two objects into a file called “2016.rda”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(cf, c, <span class="dt">file =</span> <span class="st">"2016.rda"</span>)</code></pre></div>
<p>In order to load the objects from the file into a new R session with an empty environment, the following command should be executed. It makes the saved <code>CWE</code> object <code>c</code> and <code>CVSSForecaster</code> object <code>cf</code> appear in the environment.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">"2016.rda"</span>)</code></pre></div>
</div>
</div>
<div id="plots" class="section level2">
<h2 class="hasAnchor">
<a href="#plots" class="anchor"></a>Plots</h2>
<p>The best models list can be plotted. For additional information, <a href="http://pkg.robjhyndman.com/forecast/reference/plot.forecast.html">forecast::plot.forecast</a> can be read. Point forecasts for 2016 are represented by blue lines. Actual values of 2016 as red lines are added to the plots.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getPlots</span>(cf<span class="op">$</span><span class="kw">getBestModelList</span>())</code></pre></div>
<p>The results from some specific type of available model can be plotted as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getPlots</span>(cf<span class="op">$</span><span class="kw">getTSLinear</span>())</code></pre></div>
</div>
<div id="a-closer-look" class="section level2">
<h2 class="hasAnchor">
<a href="#a-closer-look" class="anchor"></a>A Closer Look</h2>
<p>The results from some specific type of available model for a specific avalable CWE can be plotted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getTSLinear</span>(<span class="st">"CWE-119"</span>)<span class="op">$</span><span class="kw">getPlot</span>()</code></pre></div>
<p>As presented before, <code>cf$getBestAssessments()</code> enabled to find the best model for each CWE. Given that an ETS(A,N,N) model was chosen for CWE-119, one can examine it further.</p>
<p>Observe its plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">getETS</span>(<span class="st">"CWE-119"</span>)<span class="op">$</span><span class="kw">getPlot</span>()</code></pre></div>
<div class="figure">
<img src="https://www.dropbox.com/s/0iga87vd6e7h8q4/2016_cwe119.png?raw=1">
</div>
<p>Different details could be revealed by accessing the object’s forecasts and using the <code>summary</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(cf<span class="op">$</span><span class="kw">getETS</span>(<span class="st">"CWE-119"</span>)<span class="op">$</span><span class="kw">getFcasted</span>())

Forecast method<span class="op">:</span><span class="st"> </span><span class="kw">ETS</span>(A,N,N)

Model Information<span class="op">:</span>
<span class="kw">ETS</span>(A,N,N) 

Call<span class="op">:</span>
<span class="st"> </span>forecast<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/ets">ets</a></span>(<span class="dt">y =</span> train, <span class="dt">lambda =</span> super<span class="op">$</span><span class="kw">findLambda</span>(train), <span class="dt">biasadj =</span> T) 

  Box<span class="op">-</span>Cox transformation<span class="op">:</span><span class="st"> </span>lambda=<span class="st"> </span><span class="op">-</span><span class="fl">0.739</span> 

  Smoothing parameters<span class="op">:</span>
<span class="st">    </span>alpha =<span class="st"> </span><span class="fl">0.2138</span> 

  Initial states<span class="op">:</span>
<span class="st">    </span>l =<span class="st"> </span><span class="fl">1.074</span> 

  sigma<span class="op">:</span><span class="st">  </span><span class="fl">0.0149</span>

      AIC      AICc       BIC 
<span class="op">-</span><span class="fl">253.0855</span> <span class="op">-</span><span class="fl">252.6569</span> <span class="op">-</span><span class="fl">246.8025</span> 

Error measures<span class="op">:</span>
<span class="st">                      </span>ME      RMSE       MAE       MPE     MAPE      MASE        ACF1
Training set <span class="op">-</span><span class="fl">0.05281217</span> <span class="fl">0.5416452</span> <span class="fl">0.4264229</span> <span class="op">-</span><span class="fl">1.068501</span> <span class="fl">5.465742</span> <span class="fl">0.5984883</span> <span class="op">-</span><span class="fl">0.01617852</span>

Forecasts<span class="op">:</span>
<span class="st">         </span>Point Forecast    Lo <span class="dv">80</span>    Hi <span class="dv">80</span>    Lo <span class="dv">95</span>    Hi <span class="dv">95</span>
Jan <span class="dv">2016</span>       <span class="fl">7.918037</span> <span class="fl">7.242279</span> <span class="fl">8.635749</span> <span class="fl">6.937559</span> <span class="fl">9.084684</span>
Feb <span class="dv">2016</span>       <span class="fl">7.919510</span> <span class="fl">7.228802</span> <span class="fl">8.654115</span> <span class="fl">6.918447</span> <span class="fl">9.115394</span>
Mar <span class="dv">2016</span>       <span class="fl">7.920983</span> <span class="fl">7.215658</span> <span class="fl">8.672150</span> <span class="fl">6.899837</span> <span class="fl">9.145614</span>
Apr <span class="dv">2016</span>       <span class="fl">7.922455</span> <span class="fl">7.202827</span> <span class="fl">8.689874</span> <span class="fl">6.881696</span> <span class="fl">9.175378</span>
May <span class="dv">2016</span>       <span class="fl">7.923928</span> <span class="fl">7.190290</span> <span class="fl">8.707307</span> <span class="fl">6.863997</span> <span class="fl">9.204713</span>
Jun <span class="dv">2016</span>       <span class="fl">7.925401</span> <span class="fl">7.178029</span> <span class="fl">8.724466</span> <span class="fl">6.846713</span> <span class="fl">9.233646</span>
Jul <span class="dv">2016</span>       <span class="fl">7.926874</span> <span class="fl">7.166030</span> <span class="fl">8.741365</span> <span class="fl">6.829822</span> <span class="fl">9.262199</span>
Aug <span class="dv">2016</span>       <span class="fl">7.928346</span> <span class="fl">7.154278</span> <span class="fl">8.758020</span> <span class="fl">6.813300</span> <span class="fl">9.290395</span>
Sep <span class="dv">2016</span>       <span class="fl">7.929819</span> <span class="fl">7.142760</span> <span class="fl">8.774442</span> <span class="fl">6.797131</span> <span class="fl">9.318253</span>
Oct <span class="dv">2016</span>       <span class="fl">7.931292</span> <span class="fl">7.131465</span> <span class="fl">8.790644</span> <span class="fl">6.781294</span> <span class="fl">9.345790</span>
Nov <span class="dv">2016</span>       <span class="fl">7.932765</span> <span class="fl">7.120382</span> <span class="fl">8.806637</span> <span class="fl">6.765774</span> <span class="fl">9.373024</span>
Dec <span class="dv">2016</span>       <span class="fl">7.934237</span> <span class="fl">7.109500</span> <span class="fl">8.822431</span> <span class="fl">6.750556</span> <span class="fl">9.399968</span></code></pre></div>
<p>When the object’s plot did not have an exclamation mark as part of its y-axis label, then it gives an indication that the model’s residuals were satisfying the assumtptions. It can be checked.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>cf<span class="op">$</span><span class="kw">getETS</span>(<span class="st">"CWE-119"</span>)<span class="op">$</span><span class="kw">areResidualsNotRandom</span>() 
[<span class="dv">1</span>] <span class="ot">FALSE</span>
<span class="op">&gt;</span><span class="st"> </span>cf<span class="op">$</span><span class="kw">getETS</span>(<span class="st">"CWE-119"</span>)<span class="op">$</span><span class="kw">areResidualsNotNormal</span>()
[<span class="dv">1</span>] <span class="ot">FALSE</span></code></pre></div>
<p>The <code>NVDModel</code>, <code>CVSSForecaster</code>, <code>FitModel</code> and <code>FcastModel</code> documentation gives introduces some other useful methods which can be called using a model object or a list of model objects. For example <code>cf$getETS("CWE-59")$isBootstrapNotUsed()</code>, <code>cf$getETS("CWE-59")$getAssessment()</code>, <code>cf$getAllAssessments()</code>, <code>cf$getBenchmark("CWE-20")$isBoxCoxApplied()</code>.</p>
<p>Sometimes ACF-plots must be examined. This could be done with the help of the <a href="http://pkg.robjhyndman.com/forecast/index.html">forecast</a> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">forecast<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/checkresiduals">checkresiduals</a></span>(cf<span class="op">$</span><span class="kw">getNNAR</span>(<span class="st">"CWE-79"</span>)<span class="op">$</span><span class="kw">getFcasted</span>(), <span class="dt">plot =</span> T)</code></pre></div>
</div>
<div id="the-unseen-future" class="section level2">
<h2 class="hasAnchor">
<a href="#the-unseen-future" class="anchor"></a>The Unseen Future</h2>
<p>The best models’ training and test data can be merged into new training data for forecasts of the unknown future of 12 months. For each CWE the method <code>useBest</code> uses the type of model that were chosen as the best for 2016 to generate forecasts for 2017 with the new training set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">list_of_unseen_future_forecasts &lt;-<span class="st"> </span>cf<span class="op">$</span><span class="kw">useBest</span>(<span class="dv">12</span>)</code></pre></div>
<p>The used best models’ new forecasts can be plotted</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">plotUseBest</span>(list_of_unseen_future_forecasts, <span class="dt">row_no =</span> <span class="dv">5</span>, <span class="dt">col_no =</span> <span class="dv">2</span>)</code></pre></div>
<p>It could be useful to store these results as well for later use.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(list_of_unseen_future_forecasts, <span class="dt">file =</span> <span class="st">"2017basedon2016withnewtestset.rda"</span>)</code></pre></div>
<p>Assuming that some time has gone past and the previously unseen 2017 has taken place. A new CWE object <code>c2</code> can be created containing time series test data. It is assumed that up-to-date XML files from <a href="https://nvd.nist.gov/vuln/data-feeds#CVE_FEED" class="uri">https://nvd.nist.gov/vuln/data-feeds#CVE_FEED</a> have been downloaded to the working directory. It is assumed that the prefviously created <code>CVSSForecaster</code> object <code>cf</code>is also loaded into the environment. Based on the CWEs of <code>cf</code>, the necessary 2017 time series data with actual monthly mean CVSS scores are extracted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">c2 &lt;-<span class="st"> </span>CWE<span class="op">$</span><span class="kw">new</span>()
c2<span class="op">$</span><span class="kw">setStartYear</span>(<span class="dv">2017</span>)
c2<span class="op">$</span><span class="kw">setEndYear</span>(<span class="dv">2017</span>)
c2<span class="op">$</span><span class="kw">setBaseData</span>(<span class="kw">c</span>(<span class="st">"nvdcve-2.0-2011.xml"</span>,<span class="st">"nvdcve-2.0-2012.xml"</span>,<span class="st">"nvdcve-2.0-2013.xml"</span>,<span class="st">"nvdcve-2.0-2014.xml"</span>,<span class="st">"nvdcve-2.0-2015.xml"</span>,<span class="st">"nvdcve-2.0-2016.xml"</span>,<span class="st">"nvdcve-2.0-2017.xml"</span>))
c2<span class="op">$</span><span class="kw">setTimeSeriesData</span>(c2<span class="op">$</span><span class="kw">getMonthlyData</span>(cf<span class="op">$</span><span class="kw">getCWENames</span>()))</code></pre></div>
<p>One can now find out the forecast accuracy for the forecasts in <code>list_of_unseen_future_forecasts</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">assessUseBest</span>(list_of_unseen_future_forecasts, c2<span class="op">$</span><span class="kw">getTimeSeriesData</span>())</code></pre></div>
<p>Plots with the actual values can be generated</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf<span class="op">$</span><span class="kw">assessUseBest</span>(list_of_unseen_future_forecasts, c2<span class="op">$</span><span class="kw">getTimeSeriesData</span>())
cf<span class="op">$</span><span class="kw">plotUseBest</span>(list_of_unseen_future_forecasts, <span class="dt">row_no =</span> <span class="dv">5</span>, <span class="dt">col_no =</span> <span class="dv">2</span>, <span class="dt">actual =</span> c2<span class="op">$</span><span class="kw">getTimeSeriesData</span>())</code></pre></div>
<p>The new <code>CWE</code> object <code>c2</code> can be later modified and used in the same way for 2017 as <code>CWE</code> object <code>c</code> as used for 2016.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">c2<span class="op">$</span><span class="kw">setStartYear</span>(<span class="dv">2011</span>)
c2<span class="op">$</span><span class="kw">setTimeSeriesData</span>(c2<span class="op">$</span><span class="kw">getInterestingMonthlyData</span>())
## CVSSForecaster object cf2 for 2017
cf2 &lt;-<span class="st"> </span>CVSSForecaster<span class="op">$</span><span class="kw">new</span>()
cf2<span class="op">$</span><span class="kw">setCWEs</span>(c2)
## ... build models, assess models, find best, analyse best, use best for unseen 2018</code></pre></div>
<p>The unseen future list is a list of lists, where each list has two elements: CWE ID and the “forecast” object. In order to analyse that more closely, the following commands could be used. Sometimes it might be useful to keep the previously used <code>CVSSForecaster</code> object in memory as well to check whether forecast intervals were previously generated from bootstrapped residuals (<code>useBest</code> puts into use the best models; if these were using bootstrapped forecast intervals, then the forecast intervals by <code>useBest</code> method execution are using this techinque as well).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Extract the first object's "forecast" object
u1 &lt;-<span class="st"> </span>list_of_unseen_future_forecasts[[<span class="dv">1</span>]]<span class="op">$</span>future

## Plot with ggplot2
ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/autoplot">autoplot</a></span>(u264)

## Check that the mean of residuals is close to zero
<span class="kw">mean</span>(zoo<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/zoo/topics/na.approx">na.approx</a></span>(stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/residuals">residuals</a></span>(u1)))

## Check the summary
<span class="kw">summary</span>(u1)

## Perform the Shapiro-Wilk test and get the p-value
stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/shapiro.test">shapiro.test</a></span>(zoo<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/zoo/topics/na.approx">na.approx</a></span>(stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/residuals">residuals</a></span>(u1)))<span class="op">$</span>p.value

## Check whether the residuals are independently distributed (set plot = T if Ljung-Box or Breusch-Godfrey is not preformed to check the ACF plot)
forecast<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/checkresiduals">checkresiduals</a></span>(u1, <span class="dt">plot =</span> F)

## Let's assume that the best model type was ARIMA. Check whether previously forecast intervals were generated from bootstrapped residuals (if yes, then they are generated from bootstrapped residuals now as well)
cf<span class="op">$</span><span class="kw">getARIMA</span>(list_of_unseen_future_forecasts[[<span class="dv">1</span>]]<span class="op">$</span>cwe)<span class="op">$</span><span class="kw">isBootstrapNotUsed</span>()

## Observe the training set
u1<span class="op">$</span>x

## When Box-Cox transformation is applied, sometimes the lambda is available this way
u1<span class="op">$</span>lambda
## ... or that way
u1<span class="op">$</span>model<span class="op">$</span>lambda
## ... sometimes it is necessary to recalculate it to find out what the lambda was
forecast<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/forecast/topics/BoxCox.lambda">BoxCox.lambda</a></span>(u1<span class="op">$</span>x)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#prepare-the-time-series">Prepare the Time Series</a></li>
      <li><a href="#prepare-the-forecasting-object">Prepare the Forecasting Object</a></li>
      <li><a href="#generate-forecasts">Generate Forecasts</a></li>
      <li><a href="#initial-steps-with-the-results">Initial Steps with the Results</a></li>
      <li><a href="#plots">Plots</a></li>
      <li><a href="#a-closer-look">A Closer Look</a></li>
      <li><a href="#the-unseen-future">The Unseen Future</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by github.com/realerikrani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
